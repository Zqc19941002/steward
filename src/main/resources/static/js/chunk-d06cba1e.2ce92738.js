(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d06cba1e"],{"0e67":function(t,e,n){"use strict";var s=n("b69b"),a=n.n(s);a.a},2566:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"authorization-vue frame-page h-panel"},[t._m(0),n("div",{staticClass:"h-panel-body"},[n("div",{staticClass:"authorization-frame"},[n("div",{staticClass:"role-container"},t._l(t.roles,function(e){return n("div",{key:e.id,staticClass:"role-item",class:{selected:t.role==e},on:{click:function(n){return t.changeRole(e)}}},[n("p",{staticClass:"title"},[t._v(t._s(e.name))]),n("p",{staticClass:"desc"},[t._v(t._s(e.description))])])}),0),n("div",{staticClass:"menu-container"},[n("div",{staticStyle:{"margin-bottom":"10px"}},[n("Button",{attrs:{color:"primary",size:"s"},on:{click:function(e){t.$refs.menu.chooseAll(),t.$refs.menu.expandAll()}}},[t._v("全选")]),n("Button",{attrs:{size:"s"},on:{click:function(e){t.menus=[]}}},[t._v("清空")])],1),n("Tree",{ref:"menu",attrs:{option:t.menuOption,multiple:"","choose-mode":"some"},model:{value:t.menus,callback:function(e){t.menus=e},expression:"menus"}})],1),n("div",{staticClass:"users-container"},[n("div",{staticStyle:{"margin-bottom":"10px"}},[n("Button",{attrs:{color:"primary",size:"s"},on:{click:function(e){t.$refs.user.chooseAll(),t.$refs.user.expandAll()}}},[t._v("全选")]),n("Button",{attrs:{size:"s"},on:{click:function(e){t.users=[]}}},[t._v("清空")])],1),n("Tree",{ref:"user",attrs:{option:t.userOption,multiple:""},model:{value:t.users,callback:function(e){t.users=e},expression:"users"}})],1)]),n("div",{staticClass:"text-center"},[n("Button",{attrs:{color:"primary"},on:{click:t.save}},[t._v("保存")]),n("Button",{on:{click:t.getData}},[t._v("重置")])],1)])])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"h-panel-bar"},[n("span",{staticClass:"h-panel-title"},[t._v("权限管理")]),n("span",{staticClass:"dark2-color"},[t._v("保存示例是存储在Local Storage中，可通过清空 Local Storage 属性 SYS_CONFIG_MENU 重置菜单")])])}],i=n("4b9c"),r=i["a"],o=(n("0e67"),n("2877")),u=Object(o["a"])(r,s,a,!1,null,null,null);e["default"]=u.exports},"4b9c":function(t,e,n){"use strict";(function(t,s,a){var i=n("bd0f");e["a"]={data:function(){return{role:null,roles:[],menuOption:{datas:i["b"]},userOption:{keyName:"id",titleName:"name",dataMode:"list",parentName:"parent",getTotalDatas:function(e){t.Management.users().then(function(t){t.ok&&e(t.body)})}},menus:[],users:[]}},mounted:function(){this.init()},methods:{init:function(){this.$refs.menu.expandAll(),this.getRoles()},changeRole:function(t){this.role=t,this.initNetTagTable(t)},getRoles:function(){var e=this;t.Management.roles().then(function(t){t.ok&&(e.roles=t.body,e.roles.length&&(e.role=e.roles[0],e.initNetTagTable()))})},initNetTagTable:function(){this.menus=s.get("SYS_MENUS")},save:function(){a.saveLocal("SYS_CONFIG_MENU",this.menus),this.$Message.success("保存成功"),s.trigger("SYS_MENU_REFRESH")}},computed:{}}}).call(this,n("5965")["default"],n("1085"),n("d557")["default"])},5965:function(t,e,n){"use strict";n.r(e);var s=n("f95b"),a={User:{info:function(){return s["a"].get("/account/info")}},Dict:{get:function(){return s["a"].get("/dict")}},Home:{getMessageList:function(){return s["a"].get("/home/messages")}},Account:{menus:function(){}},Login:{login:function(t){return s["a"].postJson("/login",t)},logout:function(t){return s["a"].post("/logout",t)}},Management:{users:function(t){return s["a"].get("/management/users",t)},roles:function(t){return s["a"].get("/management/roles",t)}}};e["default"]=a},b69b:function(t,e,n){},f95b:function(t,e,n){"use strict";(function(t){n("28a5"),n("ac6a"),n("5df3"),n("4f7f");var s=n("bc3a"),a=n.n(s),i=n("4328"),r=n.n(i),o=n("d557"),u={repeatable:!1},c={PREFIX:"/api",Author:o["default"].getAuthor()||"heyui",requestingApi:new Set,extractUrl:function(t){return t?t.split("?")[0]:""},isRequesting:function(t){var e=this.extractUrl(t);return this.requestingApi.has(e)},addRequest:function(t){var e=this.extractUrl(t);this.requestingApi.add(e)},deleteRequest:function(t){var e=this.extractUrl(t);this.requestingApi.delete(e)},get:function(t,e,n){var s={url:t,method:"GET"};return e&&(s.params=e),this.ajax(s,n)},post:function(t,e,n){var s={url:t,method:"POST"};return e&&(s.data=r.a.stringify(e)),this.ajax(s,n)},postJson:function(t,e,n){return this.ajax({url:t,method:"POST",data:e},n)},patchJson:function(t,e,n,s){return this.ajax({url:t,method:"PATCH",data:e},s)},delete:function(t,e){return this.ajax({url:t,method:"DELETE"},e)},ajax:function(e,n){var s=o["default"].extend({},u,e,n||{});s.crossDomain=0===s.url.indexOf("http");var i=s.url;if(s.crossDomain||(i=s.url=this.PREFIX+s.url),"GET"!=s.method){if(this.isRequesting(i))return new Promise(function(t,e){t({ok:!1,msg:"重复请求"})});!1===s.repeatable&&this.addRequest(i)}var c={author:this.Author,Authorization:o["default"].getLocal("token")},l={headers:c,responseType:"json",validateStatus:function(t){return!0},paramsSerializer:function(t){return r.a.stringify(t,{allowDots:!0})}};s.crossDomain&&(l.headers={});var f=this;return s=o["default"].extend({},l,s),new Promise(function(e){return a.a.request(s).then(function(n){f.deleteRequest(s.url);var a=n.data,i=n.status;if(200!=i){if(401==i)return void(window.top.location="/login");500==i?t.$Message.error("后台异常"):404==i?t.$Message.error("请求不存在"):200!=i&&t.$Message.error(a._msg||"请求异常")}a.ok=200==a.status,e(a)}).catch(function(){f.deleteRequest(s.url),e({ok:!1})})})}};e["a"]=c}).call(this,n("d54e"))}}]);
//# sourceMappingURL=chunk-d06cba1e.2ce92738.js.map